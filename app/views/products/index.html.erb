<%# app/views/products/index.html.erb %>
<% content_for :header do %>
  <header class="flex items-center justify-between py-8 px-6 border-b border-gray-800 bg-gray-900">
    <span class="font-black text-2xl tracking-widest uppercase text-white">Spot Light</span>
    <div class="flex items-center gap-6">
      <%= link_to cart_path, class: "text-white hover:text-blue-400 relative" do %>
        <i class="fi fi-rr-shopping-cart text-2xl"></i>
      <% end %>
      <div x-data="{ open: false }" class="relative">
        <button @click="open = !open" @keydown.escape="open = false" class="text-white hover:text-blue-400 focus:outline-none" aria-haspopup="true" aria-expanded="false">
          <i class="fi fi-rr-user text-2xl"></i>
        </button>
        <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg py-2 z-20 border border-gray-200" x-cloak>
          <% if current_user %>
            <%= button_to 'Sign Out', logout_path, method: :delete, form: { class: 'block w-full' }, class: 'px-4 py-2 text-gray-700 hover:bg-gray-100 text-left w-full bg-transparent border-0 cursor-pointer' %>
          <% else %>
            <%= link_to 'Login', login_path, class: 'block px-4 py-2 text-gray-700 hover:bg-gray-100 text-left w-full' %>
            <%= link_to 'Sign Up', signup_path, class: 'block px-4 py-2 text-gray-700 hover:bg-gray-100 text-left w-full' %>
          <% end %>
        </div>
      </div>
    </div>
  </header>
<% end %>

<main class="px-8">
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-10">
    <%= render partial: "product_card", collection: @products, as: :product %>
  </div>
</main>

<% content_for :footer do %>
  <footer class="bg-white border-t mt-12 py-8 text-center">
    <div class="mb-4">
      <span class="font-black text-xl tracking-widest uppercase">S</span>
    </div>
    <div class="max-w-xl mx-auto text-gray-600 mb-4">
      A brand that strives to inspire and push creative culture forward.<br>
      We approach our work with the mentality that every product made is a learning experience to improve our craft.
    </div>
    <div class="flex justify-center gap-4 mb-6">
      <%= link_to '', '#', class: "fi fi-brands-facebook" %>
      <%= link_to '', '#', class: "fi fi-brands-instagram" %>
      <%= link_to '', '#', class: "fi fi-brands-tiktok" %>
      <%= link_to '', '#', class: "fi fi-brands-twitter" %>
    </div>
    <div class="text-sm text-gray-400">
      &copy; 2025, theme-spotlight-demo Powered by Shopify
    </div>
  </footer>
<% end %>
